(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(5),c=n(0),o=n(37),r=n.n(o),i=n(38);function s(e){var t=Object(c.useState)(new i.Client({})),n=Object(a.a)(t,1)[0],o=Object(c.useState)(function(){var e,t,n=(new Date).toISOString().replace(/[^\d]/g,"");return(e=1e6,t=9999999,Math.floor(Math.random()*(t-e+1))+e).toString()+n}()),s=Object(a.a)(o,1)[0],u=Object(c.useState)(!1),l=Object(a.a)(u,2),d=l[0],f=l[1],m=Object(c.useState)([]),b=Object(a.a)(m,2),g=b[0],h=b[1],O=e.logger,p=e.request,v=e.flag;return Object(c.useEffect)(function(){void 0===n.webSocketFactory&&(console.log("configurando"),n.configure({webSocketFactory:function(){return new r.a("https://logbridge.herokuapp.com/sockjs")},onConnect:function(){f(!0),n.subscribe("/response/".concat(s),function(e){var t=JSON.parse(e.body);h(t.message)})}}),n.activate())},[n,s]),Object(c.useEffect)(function(){d&&n.publish({destination:"/app/request/".concat(O),body:JSON.stringify({client_id:s,request:p})})},[n,s,O,d,p,v]),g}},21:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var a=n(5),c=n(0),o=n.n(c),r=(n(45),n(15));function i(t){var n=Object(c.useState)(0),i=Object(a.a)(n,2),s=i[0],u=i[1],l=t.logger,d=Object(r.a)({logger:l,request:"ultima_transmissao",flag:s});return Object(c.useEffect)(function(){return e.setTimeout(function(){u(s+1)},5e3),function(){e.clearTimeout()}}),o.a.createElement("ul",{className:"lista_transmissores"},d.sort(function(e,t){return e.no>t.no}).map(function(e){return o.a.createElement("li",{className:"lista_transmissores",key:e.no+e.data_hora,onClick:function(){return t.onClick(e)}},o.a.createElement("div",null,e.no),o.a.createElement("div",null,new Date(e.data_hora).toLocaleString("pt-BR")))}))}}).call(this,n(2))},40:function(e,t,n){e.exports=n(77)},45:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(36),r=n.n(o),i=n(5),s=n(21),u=n(39),l=n(15);function d(){var e=Object(a.useState)(),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)(function(){!function(e){var t=new(window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection)({iceServers:[]}),n=function(){},a={},c=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/g;function o(t){a[t]||e(t),a[t]=!0}t.createDataChannel(""),t.createOffer().then(function(e){e.sdp.split("\n").forEach(function(e){e.indexOf("candidate")<0||e.match(c).forEach(o)}),t.setLocalDescription(e,n,n)}).catch(function(e){}),t.onicecandidate=function(e){e&&e.candidate&&e.candidate.candidate&&e.candidate.candidate.match(c)&&e.candidate.candidate.match(c).forEach(o)}}(function(e){c(e.replace(/\./g,"_"))})}),n}n(75);function f(e){var t=e.logger,n=e.transmissor,a=d(),o="dados/".concat(n),r=Object(l.a)({logger:t,client_id:a,request:o}),i={no:"",data_hora:""};return r.map(function(e){return i=Object(u.a)({},i,e)}),i=Object.keys(i),0===r.length?"Carregando dados do transmissor ".concat(n,"..."):c.a.createElement("table",{className:"lista_dados"},c.a.createElement("thead",null,c.a.createElement("tr",null,i.map(function(e){return c.a.createElement("th",{key:e},e)}))),c.a.createElement("tbody",null,r.map(function(e){return c.a.createElement("tr",{className:"lista_dados",key:e.no+e.data_hora},i.map(function(t){return c.a.createElement("td",{key:t},"data_hora"===t?new Date(e[t]).toLocaleString("pt-BR"):e[t])}))})))}n(76);var m=function(){var e=Object(a.useState)("rflogger01"),t=Object(i.a)(e,1)[0],n=Object(a.useState)(void 0),o=Object(i.a)(n,2),r=o[0],u=o[1];return void 0===d()?null:c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"sidebar"},c.a.createElement(s.a,{logger:t,onClick:function(e){return u(e.no)}})),c.a.createElement("div",{className:"main"},void 0!==r&&void 0!==t?c.a.createElement(f,{logger:t,transmissor:r}):null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(m,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[40,1,2]]]);
//# sourceMappingURL=main.4fbf22fe.chunk.js.map