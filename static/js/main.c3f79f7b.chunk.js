(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var a=n(5),c=n(0),o=n(37),r=n.n(o),i=n(38);function s(t){var e=Object(c.useState)(new i.Client({})),n=Object(a.a)(e,1)[0],o=Object(c.useState)(function(){var t,e,n=(new Date).toISOString().replace(/[^\d]/g,"");return(t=1e6,e=9999999,Math.floor(Math.random()*(e-t+1))+t).toString()+n}()),s=Object(a.a)(o,1)[0],u=Object(c.useState)(!1),l=Object(a.a)(u,2),d=l[0],f=l[1],m=Object(c.useState)(void 0),b=Object(a.a)(m,2),g=b[0],v=b[1],h=t.logger,O=t.request,p=t.flag;return Object(c.useEffect)(function(){void 0===n.webSocketFactory&&(n.configure({webSocketFactory:function(){return new r.a("https://logbridge.herokuapp.com/sockjs")},onConnect:function(){f(!0),n.subscribe("/response/".concat(s),function(t){var e=JSON.parse(t.body);v(e.message)})}}),n.activate())},[n,s]),Object(c.useEffect)(function(){d&&(console.log("enviando",O),n.publish({destination:"/app/request/".concat(h),body:JSON.stringify({client_id:s,request:O})}))},[n,s,h,d,O,p]),g}},21:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return i});var a=n(5),c=n(0),o=n.n(c),r=(n(45),n(15));function i(e){var n=Object(c.useState)(0),i=Object(a.a)(n,2),s=i[0],u=i[1],l=e.logger,d=Object(r.a)({logger:l,request:"ultima_transmissao",flag:s});return Object(c.useEffect)(function(){return t.setTimeout(function(){u(s+1)},5e3),function(){t.clearTimeout()}}),void 0===d?"Carregando...":o.a.createElement("ul",{className:"lista_transmissores"},d.sort(function(t,e){return t.no>e.no}).map(function(t){return o.a.createElement("li",{className:"lista_transmissores",key:t.no+t.data_hora,onClick:function(){return e.onClick(t)}},o.a.createElement("div",null,t.no),o.a.createElement("div",null,function(t){var e=new Date(t).toISOString(),n=e.substr(8,2),a=e.substr(5,2),c=e.substr(0,4),o=e.substr(11,2),r=e.substr(14,2),i=e.substr(17,2);return"".concat(n,"/").concat(a,"/").concat(c," ").concat(o,":").concat(r,":").concat(i)}(t.data_hora+"Z")))}))}}).call(this,n(2))},40:function(t,e,n){t.exports=n(77)},45:function(t,e,n){},75:function(t,e,n){},76:function(t,e,n){},77:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),o=n(36),r=n.n(o),i=n(5),s=n(21),u=n(39),l=n(15);function d(){var t=Object(a.useState)(),e=Object(i.a)(t,2),n=e[0],c=e[1];return Object(a.useEffect)(function(){!function(t){var e=new(window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection)({iceServers:[]}),n=function(){},a={},c=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/g;function o(e){a[e]||t(e),a[e]=!0}e.createDataChannel(""),e.createOffer().then(function(t){t.sdp.split("\n").forEach(function(t){t.indexOf("candidate")<0||t.match(c).forEach(o)}),e.setLocalDescription(t,n,n)}).catch(function(t){}),e.onicecandidate=function(t){t&&t.candidate&&t.candidate.candidate&&t.candidate.candidate.match(c)&&t.candidate.candidate.match(c).forEach(o)}}(function(t){c(t.replace(/\./g,"_"))})}),n}n(75);function f(t){var e=t.logger,n=t.transmissor,a=d(),o="dados/".concat(n),r=Object(l.a)({logger:e,client_id:a,request:o});if(void 0===r)return"Localizando dados do transmissor ".concat(n,"...");if(0===r.length)return"N\xe3o h\xe1 dados do transmissor ".concat(n," gravados no per\xedodo pesquisado");var i={no:"",data_hora:""};return r.map(function(t){return i=Object(u.a)({},i,t)}),i=Object.keys(i),c.a.createElement("table",{className:"lista_dados"},c.a.createElement("thead",null,c.a.createElement("tr",null,i.map(function(t){return c.a.createElement("th",{key:t},t)}))),c.a.createElement("tbody",null,r.map(function(t){return c.a.createElement("tr",{className:"lista_dados",key:t.no+t.data_hora},i.map(function(e){return c.a.createElement("td",{key:e},"data_hora"===e?function(t){var e=new Date(t).toISOString(),n=e.substr(8,2),a=e.substr(5,2),c=e.substr(0,4),o=e.substr(11,2),r=e.substr(14,2),i=e.substr(17,2);return"".concat(n,"/").concat(a,"/").concat(c," ").concat(o,":").concat(r,":").concat(i)}(t[e]):t[e])}))})))}n(76);var m=function(){var t=Object(a.useState)("rflogger01"),e=Object(i.a)(t,1)[0],n=Object(a.useState)(void 0),o=Object(i.a)(n,2),r=o[0],u=o[1];return void 0===d()?null:c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"sidebar"},c.a.createElement(s.a,{logger:e,onClick:function(t){return u(t.no)}})),c.a.createElement("div",{className:"main"},void 0!==r&&void 0!==e?c.a.createElement(f,{logger:e,transmissor:r}):null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(m,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[40,1,2]]]);
//# sourceMappingURL=main.c3f79f7b.chunk.js.map